import 'dart:io';

import 'package:pubspec_lock_parse/pubspec_lock_parse.dart';

Future<void> main(List<String> args) async {
  final lockFileContents = File('pubspec.lock').readAsStringSync();
  final lockfile = PubspecLock.parse(lockFileContents);
  final version = lockfile.packages['intl4x']!.version;
  File('bin/version.dart').writeAsStringSync('''
/// This file is autogenerated by bin/set_version.dart, do not modify manually.
const intl4xVersion = '${version.canonicalizedVersion}';
  ''');
}
